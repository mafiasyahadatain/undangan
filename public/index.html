<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Undangan Digital</title>

    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap"
    />

    <link rel="stylesheet" href="./css/guest.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/aos.css" />
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/fontawesome.min.css" />
  </head>

  <body
    data-url="https://isxvmxuopztiqvfrvmqr.supabase.co"
    data-key="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzeHZteHVvcHp0aXF2ZnJ2bXFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNDI2NzAsImV4cCI6MjA2NTcxODY3MH0.eA4BaP8dNln-3L2hfcwV5pPPoifbHHT3V3CHIYlOJ0A"
  >
    <!-- Loading screen -->
    <div id="loading" class="loading">
      <div class="spinner-border text-light" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <!-- Buka Undangan -->
    <div id="open-invitation" class="open-invitation d-none">
      <div class="button">
        <button type="button" id="open-invitation-button" class="btn btn-primary">
          Buka Undangan
        </button>
      </div>
    </div>

    <!-- Smartphone mode -->
    <div class="col-sm-7 col-md-6 col-lg-5 col-xl-4 col-xxl-3 m-0 p-0">
      <!-- Main Content -->
      <main data-bs-spy="scroll" data-bs-target="#navbar-menu" data-bs-root-margin="25% 0% 0% 0%" data-bs-smooth-scroll="true" tabindex="0">

        <!-- Home -->
        <section id="home" class="bg-light-dark position-relative overflow-hidden p-0 m-0">
          <img src="./assets/images/placeholder.webp" data-src="./assets/images/bg.webp" alt="bg" class="position-absolute opacity-25 top-50 start-50 translate-middle bg-cover-home">

          <div class="position-relative text-center">
            <h1 class="font-esthetic my-4 pt-4 fw-medium" style="font-size: 2.25rem;">Undangan Pernikahan</h1>

            <img src="./assets/images/placeholder.webp" data-src="./assets/images/bg.webp" alt="bg" onclick="undangan.guest.modal(this)" class="img-center-crop rounded-circle border border-3 border-light shadow my-4 mx-auto">

            <h2 class="font-esthetic my-4" style="font-size: 2.25rem;">Muhammad Iqbal<br>&amp;<br>Febriyani Valentina</h2>
            <p class="my-2" style="font-size: 1.25rem;">Rabu, 15 Maret 2023</p>

            <button class="btn btn-outline-auto btn-sm shadow rounded-pill px-3 py-1" style="font-size: 0.825rem;">
              <i class="fa-solid fa-calendar-check me-2"></i>Save Google Calendar
            </button>

            <div class="d-flex justify-content-center align-items-center mt-4 mb-2">
              <div class="mouse-animation border border-secondary-subtle border-2 rounded-5 px-2 py-1">
                <div class="scroll-animation rounded-4 bg-secondary"></div>
              </div>
            </div>

            <p class="mb-4 text-secondary" style="font-size: 0.875rem;">Scroll Down</p>
          </div>
        </section>
        <!-- Wave Separator -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="color-theme-svg no-gap-bottom">
          <path fill="currentColor" fill-opacity="1" d="M0,160L48,144C96,128,192,96,288,106.7C384,117,480,171,576,165.3C672,160,768,96,864,96C960,96,1056,160,1152,154.7C1248,149,1344,75,1392,37.3L1440,0L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
        </svg>

        <!-- Kisah Cinta Section -->
        <section id="story" class="bg-light-dark py-5">
          <div class="container text-center">
            <h2 class="font-esthetic mb-4">Kisah Cinta Kami</h2>
            <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.</p>
          </div>
        </section>

        <!-- Countdown Section -->
        <section id="countdown" class="bg-dark text-white py-5">
          <div class="container text-center">
            <h2 class="font-esthetic mb-4">Hitung Mundur</h2>
            <div id="countdown-timer" class="d-flex justify-content-center"></div>
          </div>
        </section>

        <!-- RSVP Section -->
        <section id="rsvp" class="bg-light-dark py-5">
          <div class="container text-center">
            <h2 class="font-esthetic mb-4">Konfirmasi Kehadiran</h2>
            <form id="rsvp-form">
              <div class="mb-3">
                <input type="text" id="name" class="form-control" placeholder="Nama Anda" required>
              </div>
              <div class="mb-3">
                <select id="attendance" class="form-select" required>
                  <option value="">Apakah Anda akan hadir?</option>
                  <option value="yes">Ya, saya akan hadir</option>
                  <option value="no">Maaf, tidak bisa hadir</option>
                </select>
              </div>
              <button type="submit" class="btn btn-primary">Kirim</button>
            </form>
          </div>
        </section>

        <!-- Love Gift Section -->
        <section id="gift" class="bg-light py-5">
          <div class="container text-center">
            <h2 class="font-esthetic mb-4">Love Gift</h2>
            <p class="lead">Silakan berbagi kebahagiaan bersama kami.</p>
          </div>
        </section>

        <!-- Comment Section -->
        <section id="comment" class="bg-dark text-white py-5">
          <div class="container text-center">
            <h2 class="font-esthetic mb-4">Komentar</h2>
            <div id="comment-list"></div>
            <form id="comment-form" class="mt-4">
              <div class="mb-3">
                <input type="text" id="comment-name" class="form-control" placeholder="Nama Anda" required>
              </div>
              <div class="mb-3">
                <textarea id="comment-message" class="form-control" rows="3" placeholder="Ucapan / Doa" required></textarea>
              </div>
              <button type="submit" class="btn btn-primary">Kirim Komentar</button>
            </form>
          </div>
        </section>
        
        <!-- Logic ?to= -->
        <script>
          const params = new URLSearchParams(window.location.search);
          const guest = decodeURIComponent(params.get("to") || "Tamu Undangan");

          const opening = document.getElementById("guest-name-opening");
          if (opening) {
            opening.textContent = `Kepada Yth. Bapak/Ibu/Saudara ${guest}`;
          }

          setTimeout(() => {
            const main = document.getElementById("guest-name");
            if (main) {
              main.textContent = `Kepada Yth. Bapak/Ibu/Saudara ${guest}`;
            }
          }, 1000);
        </script>

        <!-- Supabase SDK v1.35.6 -->
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.35.6/dist/umd/supabase.min.js"></script>
        <script>
          window.addEventListener("DOMContentLoaded", () => {
            const supabase = window.supabase.createClient(
              document.body.getAttribute('data-url'),
              document.body.getAttribute('data-key')
            );

            console.log("‚úÖ Supabase initialized", supabase);

            // Fetch komentar
            supabase.from('comment').select('*').then(({ data, error }) => {
              if (error) {
                console.error("‚ùå Error fetch komentar:", error);
              } else {
                console.log("‚úÖ Komentar:", data);
              }
            });
          });
        </script>

        <!-- üü• Guest.js dikomen dulu -->
        <!-- <script src="./dist/guest.js"></script> -->

      </main>
    </div>

  </body>
</html>
